# 01.<我做系统架构的一些原则>摘要

最近读了陈浩的博客：[我做系统架构的一些原则](https://coolshell.cn/articles/21672.html)，对文章的内容认同挺多，简单做下自己的总结和反思。

## **原则三：选择最主流和成熟的技术**
技术无所谓对错，只有最适合自己的才是最好的。但是做技术架构和选型，一定要考虑自己的产品特点和发展。比如：
- 如果toC方向，爆发就是用户量和访问量或者产品的核心价值。这个时候对服务可用性、服务性能都会有高的要求。选择成熟互联网通用的技术架构应该是最适合自己的。
- 如果希望最小的资源应对高并发、高性能的场景，选择C、lua可能会取得更好的效果。

技术架构一定要考虑扩展性。

## **原则五：制定并遵循服从标准、规范和最佳实践**

对api接口的设计，可能仁者见仁，智者见智。尤其中间进入的一些项目，已经存在一些技术债务或风格，那如何简直最佳实践呢？自己也没标准答案。但是个人还是认为：新服务提供的接口，遵循标准的restful定义，在接口文档和交互会通用和维护。

1. (Guidance for Azure service teams)[https://github.com/microsoft/api-guidelines]
2. (Microsoft Azure REST API Guidelines)[https://github.com/microsoft/api-guidelines/blob/vNext/azure/Guidelines.md]
3. (RESTful API 最佳实践)[https://www.ruanyifeng.com/blog/2018/10/restful-api-best-practices.html]
4. (RESTful web API design)[https://learn.microsoft.com/en-us/azure/architecture/best-practices/api-design]

## **原则七：对控制逻辑进行全面收口**

 > 复制一份。

所有的程序都会有两种逻辑，一种是业务逻辑，一种是控制逻辑，业务逻辑就是完成业务的逻辑，控制逻辑是辅助，比如你用多线程，还是用分布式，是用数据库还是用文件，如何配置、部署，运维、监控，事务控制，服务发现，弹性伸缩，灰度发布，高并发，等等，等等 ……这些都是控制逻辑，跟业务逻辑没有一毛钱关系。控制逻辑的技术深度会通常会比业务逻辑要深一些，门槛也会要高一些，所以，最好要专业的程序员来负责控制逻辑的开发，统一规划统一管理，进行收口。这其中包括：

- 流量收口。包括南北向和东西向的流量的调度，主要通过流量网关，开发框架 SDK或 Service Mesh 这样的技术。
- 服务治理收口。包括：服务发现、健康检查，配置管理、事务、事件、重试、熔断、限流……主要通过开发框架 SDK – 如：Spring Cloud，或服务网格Service Mesh等技术。
- 监控数据收口。包括：日志、指标、调用链……主要通过一些标准主流的探针，再加上后台的数据清洗和数据存储来完成，最好是使用无侵入式的技术。监控的数据必须统一在一个地方进行关联，这样才会产生信息。
- 资源调度有应用部署的收口。包括：计算、网络和存储的收口，主要是通过容器化的方案，如k8s来完成。
- 中间件的收口。包括：数据库，消息，缓存，服务发现，网关……等等。这类的收口方式一般要在企业内部统一建立一个共享的云化的中间件资源池

最后一句，挺认同。分享一下：** 进步永远来自于探索，探索是要付出代价的，但是收益更大。**


<br><br>
<Vssue :title="$title" />
